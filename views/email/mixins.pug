mixin customerDetails(checkoutSession)
    h3 Customer Details
    p Name: #{checkoutSession.customer_details.name}
    p Email: #{checkoutSession.customer_details.email}
    p Tax Exempt: #{checkoutSession.customer_details.tax_exempt}

mixin paymentDetails(checkoutSession)
    h3 Payment Details
    p Payment Status: #{checkoutSession.payment_status}
    p Payment Method: #{checkoutSession.payment_method_types.join(", ")}

mixin updatedplanName(plan)
    #{plan.nickname}

mixin updatedplanDetails(plan)
    #{plan.nickname} (#{plan.amount / 100}‚Ç¨ every #{plan.interval_count} #{plan.interval}s)

mixin planNickname(plan)
    #{plan.nickname} (#{plan.amount / 100}‚Ç¨)

mixin planAmount(plan)
    p (#{plan.amount / 100}‚Ç¨ every #{plan.interval_count} #{plan.interval}s)

mixin subscriptionDetails(subscription, status)
    h3 üìö Your updated Membership Details
    table.table
        tr
            td Plan:
            td #{subscription.plan.nickname} (#{subscription.plan.amount / 100}‚Ç¨ every #{subscription.plan.interval_count} #{subscription.plan.interval}s)
        tr
            td Automatic Renewal:
            td
                +periodEndDate(subscription)
        tr
            td Payment Method:
            td TODO###
        tr
            td Status:
            td #{status}

mixin switchedDetails(subscription, status)
    h3 üìö Your updated Membership Details
    table.table
        tr
            td Plan:
            td #{subscription.plan.nickname} (#{subscription.plan.amount / 100}‚Ç¨ every #{subscription.plan.interval_count} #{subscription.plan.interval}s)
        tr
            td Automatic Renewal:
            td
                +periodEndDate(subscription)
        tr
            td Payment Method:
            td TODO###
        tr
            td Status:
            td #{status}

mixin cancellationDetails(subscription, status)
    h3 üö´ Cancellation Details
    table.table
        tr
            td Plan:
            td #{subscription.plan.nickname} (#{subscription.plan.amount / 100}‚Ç¨ every #{subscription.plan.interval_count} #{subscription.plan.interval}s)
        tr
            td Status:
            td #{status}

mixin cancellationDate(subscription)
  - let date = new Date(subscription.cancel_at * 1000);
      | #{('0' + date.getDate()).slice(-2) + '.' + ('0' + (date.getMonth() + 1)).slice(-2) + '.' + date.getFullYear()}

mixin periodEndDate(subscription)
  - let date = new Date(subscription.current_period_end * 1000);
      | #{('0' + date.getDate()).slice(-2) + '.' + ('0' + (date.getMonth() + 1)).slice(-2) + '.' + date.getFullYear()}

mixin billingDetails(subscription)
    h3 Billing Details
    p Billing Cycle Anchor: #{new Date(subscription.billing_cycle_anchor * 1000).toLocaleString()}
    p Current Period Start: #{new Date(subscription.current_period_start * 1000).toLocaleString()}
    p Current Period End: #{new Date(subscription.current_period_end * 1000).toLocaleString()}

mixin signOff
    p Best regards,
    p Your ESN Heidelberg Team
    hr(style='margin: 10px 0')

mixin signature
    .signature-section
        p
            | Erasmus Student Network Heidelberg e.V.
            br
            | Postfach 12 04 31
            br
            | 69066 Heidelberg
        img(src="https://drive.usercontent.google.com/download?id=1TA9LRQkHgB950Lr86rB63j9YhH9yIWbN&export=download" alt="ESN Logo" style='width: 250px;')


mixin greeting(name)
    p Hello #{firstName} #{lastName},

mixin pleaseNote
    h3 üìù Please note

mixin moreDetails
    p üëÄ For more details, please sign-in with your @esn-heidelberg.de Google Account at üëâ [ESN Heidelberg Member Portal](https://member.esn-heidelberg.de).

mixin portalLink
    a.link(href='https://member.esn-heidelberg.de') ESN Heidelberg Member Portal

mixin passwordReset
    p üí° If you've forgotten your password, don't worry, you can reset it by emailing us at [vorstand@esn-heidelberg.de](mailto:vorstand@esn-heidelberg.de).
